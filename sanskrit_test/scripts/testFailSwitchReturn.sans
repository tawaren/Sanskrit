module TestFailSwitchReturn {
   type Option[<Embed> T] {
       Some(T);
       None;
   };

   fun TestFunApply[<Embed, Drop> A](consume a:.Option[A], a2:A):(a:A) {
       b2 = a2;
       b = switch a:.Option[A] {
          Some(a) => {
            discard b2;
            return a;
          };
          None => {
            return b2;
          };
       };
       return b;
   };
}
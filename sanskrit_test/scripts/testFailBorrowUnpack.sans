module TestFailBorrowUnpack {

    type <Embed> X[<Embed> A] {
        X(A);
    };

    private fun Test[<Embed> A](a:.X[.X[A]]):(borrowed(a) c:A){
       b = &unpack a:.X[.X[A]];
       c = unpack b:.X[A];
       return c;
    };
}